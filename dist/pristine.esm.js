var y={en:{required:"This field is required",email:"This field requires a valid email address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function S(s,l){for(;(s=s.parentElement)&&!s.classList.contains(l););return s}function v(s){return this.replace(/\${([^{}]*)}/g,(l,c)=>arguments[c])}function A(s){return s.pristine.self.form.querySelectorAll('input[name="'+s.getAttribute("name")+'"]:checked').length}function M(s,l){for(let c in l)c in s||(s[c]=l[c]);return s}var O={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},L="pristine-error",$="input:not([type^=hidden]):not([type^=submit]), select, textarea",k=new Set(["required","min","max","minlength","maxlength","pattern"]),F=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,N=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,p="en",_={},m=function(s,l){l.name=s,l.priority===void 0&&(l.priority=1),_[s]=l};m("text",{fn:s=>!0,priority:0});m("required",{fn:function(s){return this.type==="radio"||this.type==="checkbox"?A(this):s!==void 0&&s.trim()!==""},priority:99,halt:!0});m("email",{fn:s=>!s||F.test(s)});m("number",{fn:s=>!s||!isNaN(parseFloat(s)),priority:2});m("integer",{fn:s=>!s||/^\d+$/.test(s)});m("minlength",{fn:(s,l)=>!s||s.length>=parseInt(l)});m("maxlength",{fn:(s,l)=>!s||s.length<=parseInt(l)});m("min",{fn:function(s,l){return!s||(this.type==="checkbox"?A(this)>=parseInt(l):parseFloat(s)>=parseFloat(l))}});m("max",{fn:function(s,l){return!s||(this.type==="checkbox"?A(this)<=parseInt(l):parseFloat(s)<=parseFloat(l))}});m("pattern",{fn:(s,l)=>{let c=l.match(new RegExp("^/(.*?)/([gimy]*)$"));return!s||new RegExp(c[1],c[2]).test(s)}});m("equals",{fn:(s,l)=>{let c=document.querySelector(l);return c&&(!s&&!c.value||c.value===s)}});function x(s,l,c){let r=this;E(s,l,c);function E(e,n,i){e.setAttribute("novalidate","true"),r.form=e,r.config=M(n||{},O),i==="live"?r.live="live":i==="blur"?r.live="blur":i==="hybrid"?r.live="hybrid":r.live="off",r.fields=Array.from(e.querySelectorAll($)).map(function(t){let a=[],f={},d={},h=new Set;if([].forEach.call(t.attributes,function(o){if(/^data-pristine-/.test(o.name)){let u=o.name.substr(14);k.has(u)?h.add(u):u==="type"&&h.add(o.value)}}),[].forEach.call(t.attributes,function(o){if(/^data-pristine-/.test(o.name)){let u=o.name.substr(14),g=u.match(N);if(g!==null){let C=g[1]===void 0?"en":g[1];d.hasOwnProperty(C)||(d[C]={}),d[C][u.slice(0,u.length-g[0].length)]=o.value;return}u==="type"&&(u=o.value),T(a,f,u,o.value)}else k.has(o.name)&&!h.has(o.name)?T(a,f,o.name,o.value):o.name==="type"&&!h.has(o.value)&&T(a,f,o.value)}),a.sort((o,u)=>u.priority-o.priority),r.live==="live")t.addEventListener(~["radio","checkbox"].indexOf(t.getAttribute("type"))?"change":"input",function(o){r.validate(o.target)}.bind(r));else if(r.live==="blur")t.addEventListener(~["radio","checkbox"].indexOf(t.getAttribute("type"))?"change":"blur",function(o){r.validate(o.target)}.bind(r));else if(r.live==="hybrid"){let o=!1,u=t.value;t.addEventListener(~["radio","checkbox"].indexOf(t.getAttribute("type"))?"change":"blur",function(g){o=!0,r.validate(g.target)}.bind(r)),t.addEventListener(~["radio","checkbox"].indexOf(t.getAttribute("type"))?"change":"input",function(g){o&&r.validate(g.target)}.bind(r)),t.addEventListener("input",function(){(type==="checkbox"||type==="radio"?t.checked!==defaultChecked:t.value!==u)&&!o&&(o=!0,r.validate(t))})}return t.pristine={input:t,validators:a,params:f,messages:d,self:r}}.bind(r))}function T(e,n,i,t){let a=_[i];if(a&&(e.push(a),t)){let f=i==="pattern"?[t]:t.split(",");f.unshift(null),n[i]=f}}r.validate=async function(e,n){n=e&&n===!0||e===!0;let i=r.fields;e!==!0&&e!==!1&&(e instanceof HTMLElement?i=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(i=Array.from(e).map(a=>a.pristine)));let t=!0;for(let a=0;i[a];a++){let f=i[a];await I(f)?!n&&R(f):(t=!1,!n&&w(f))}return t},r.getErrors=function(e){if(!e){let n=[];for(let i=0;i<r.fields.length;i++){let t=r.fields[i];t.errors.length&&n.push({input:t.input,errors:t.errors})}return n}return e.tagName&&e.tagName.toLowerCase()==="select"?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors};async function I(e){let n=[],i=!0;for(let t=0;e.validators[t];t++){let a=e.validators[t],f=e.params[a.name]?e.params[a.name]:[];if(f[0]=e.input.value,(a.fn.constructor.name==="AsyncFunction"?!await a.fn.apply(e.input,f):!a.fn.apply(e.input,f))&&(i=!1,typeof a.msg=="function"?n.push(a.msg(e.input.value,f)):typeof a.msg=="string"?n.push(v.apply(a.msg,f)):a.msg===Object(a.msg)&&a.msg[p]?n.push(v.apply(a.msg[p],f)):e.messages[p]&&e.messages[p][a.name]?n.push(v.apply(e.messages[p][a.name],f)):y[p]&&y[p][a.name]?n.push(v.apply(y[p][a.name],f)):n.push(v.apply(y[p].default,f)),a.halt===!0))break}return e.errors=n,i}r.addValidator=function(e,n,i,t,a){e instanceof HTMLElement?(e.pristine.validators.push({fn:n,msg:i,priority:t,halt:a}),e.pristine.validators.sort((f,d)=>d.priority-f.priority)):console.warn("The parameter elem must be a dom element")},r.addAsyncValidator=function(e,n,i,t,a){e instanceof HTMLElement?(e.pristine.validators.push({fn:n,msg:i,priority:t,halt:a}),e.pristine.validators.sort((f,d)=>d.priority-f.priority)):console.warn("The parameter elem must be a dom element")};function q(e){if(e.errorElements)return e.errorElements;let n=S(e.input,r.config.classTo),i=null,t=null;return r.config.classTo===r.config.errorTextParent?i=n:i=n.querySelector("."+r.config.errorTextParent),i&&(t=i.querySelector("."+L),t||(t=document.createElement(r.config.errorTextTag),t.className=L+" "+r.config.errorTextClass,i.appendChild(t),t.pristineDisplay=t.style.display)),e.errorElements=[n,t]}function w(e){let n=q(e),i=n[0],t=n[1],{input:a}=e,d=`error-${a.id||Math.floor(new Date().valueOf()*Math.random())}`;if(i){let h=b(r.config.errorClass),o=b(r.config.successClass);o.length&&o.forEach(u=>i.classList.remove(u)),h.length&&h.forEach(u=>i.classList.add(u)),a.setAttribute("aria-describedby",d),a.setAttribute("aria-invalid","true")}t&&(t.setAttribute("id",d),t.setAttribute("role","alert"),t.innerHTML=e.errors.join("<br/>"),t.style.display=t.pristineDisplay||"")}r.addError=function(e,n){e=e.length?e[0]:e,e.pristine.errors.push(n),w(e.pristine)};function P(e){let n=q(e),i=n[0],t=n[1],{input:a}=e;if(i){let f=b(r.config.errorClass),d=b(r.config.successClass);f.length&&f.forEach(h=>i.classList.remove(h)),d.length&&d.forEach(h=>i.classList.remove(h)),a.removeAttribute("aria-describedby"),a.removeAttribute("aria-invalid")}return t&&(t.removeAttribute("id"),t.removeAttribute("role"),t.innerHTML="",t.style.display="none"),n}function R(e){let n=P(e)[0],i=b(r.config.successClass);i.length&&n&&i.forEach(t=>n.classList.add(t))}r.reset=function(){for(let e=0;r.fields[e];e++)r.fields[e].errorElements=null;Array.from(r.form.querySelectorAll("."+L)).map(function(e){e.parentNode.removeChild(e)}),Array.from(r.form.querySelectorAll("."+r.config.classTo)).map(function(e){let n=b(r.config.errorClass),i=b(r.config.successClass);n.length&&i.forEach(t=>e.classList.remove(t)),n.length&&n.forEach(t=>e.classList.remove(t))})};function b(e){let n=e.split(" ").filter(i=>i);return n.length?n:[]}return r.destroy=function(){r.reset(),r.fields.forEach(function(e){delete e.input.pristine}),r.fields=[]},r.setGlobalConfig=function(e){O=e},r}x.addValidator=function(s,l,c,r,E){m(s,{fn:l,msg:c,priority:r,halt:E})};x.addAsyncValidator=function(s,l,c,r,E){m(s,{fn:l,msg:c,priority:r,halt:E})};x.addMessages=function(s,l){let c=y.hasOwnProperty(s)?y[s]:y[s]={};Object.keys(l).forEach(function(r,E){c[r]=l[r]})};x.setLocale=function(s){p=s};export{x as default};
//# sourceMappingURL=pristine.esm.js.map
